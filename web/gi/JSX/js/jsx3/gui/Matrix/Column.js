/*
 * Copyright (c) 2001-2007, TIBCO Software Inc.
 * Use, modification, and distribution subject to terms of license.
 */
jsx3.require("jsx3.gui.Block");jsx3.Class.defineClass("jsx3.gui.Matrix.Column",jsx3.gui.Block,null,function(o,c){var
Ac=jsx3.util.Logger.getLogger(o.jsxclass.getName());var
Lc=jsx3.gui.Event;o.DEFAULT_WIDTH=100;o.TYPE_TEXT="text";o.TYPE_NUMBER="number";o.DEFAULT_VALIGN="top";o.TEMPLATES={};o.TEMPLATES["default"]='<xsl:template xmlns:xsl="http://www.w3.org/1999/XSL/Transform">\n  <xsl:param name="jsx_row_number"/>\n  <xsl:if test="@jsxcellstyle">\n    <xsl:attribute name="style"><xsl:value-of select="@jsxcellstyle"/></xsl:attribute>\n  </xsl:if>\n  <xsl:value-of select="{0}"/>&#160;\n</xsl:template>';o.TEMPLATES["empty"]='<xsl:template xmlns:xsl="http://www.w3.org/1999/XSL/Transform"></xsl:template>';o.TEMPLATES["unescape"]='<xsl:template xmlns:xsl="http://www.w3.org/1999/XSL/Transform">\n  <xsl:param name="jsx_row_number"/>\n  <xsl:if test="@jsxcellstyle">\n    <xsl:attribute name="style"><xsl:value-of select="@jsxcellstyle"/></xsl:attribute>\n  </xsl:if>\n  <xsl:value-of select="{0}" disable-output-escaping="yes"/>&#160;\n</xsl:template>';o.TEMPLATES["image"]="<xsl:template xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n  <xsl:if test=\"@jsxcellstyle\">\n    <xsl:attribute name=\"style\"><xsl:value-of select=\"@jsxcellstyle\"/></xsl:attribute>\n  </xsl:if>\n  <xsl:if test=\"{0} and not ({0} = '')\"><img style=\"position:relative;\" unselectable=\"on\">\n    <xsl:attribute name=\"src\"><xsl:apply-templates select=\"{0}\" mode=\"uri-resolver\"/></xsl:attribute>\n  </img></xsl:if>\n</xsl:template>";c.init=function(i){this.jsxsuper(i);};c.getValueTemplate=function(m){if(this.jsxvaluetemplate!=null)if(this.jsxvaluetemplate.charAt(0)=="@"){var
ac=o.TEMPLATES[this.jsxvaluetemplate.substring(1)];if(ac){return ac;}else Ac.error("The following value template type is not supported: "+this.jsxvaluetemplate);}else if(jsx3.util.strTrim(this.jsxvaluetemplate).indexOf("<xsl:template")==0)return this.jsxvaluetemplate;if(m!=null)return m;};c.setValueTemplate=function(f){this.jsxvaluetemplate=f;this.pH();};c.getResizable=function(){return this.jsxresize;};c.setResizable=function(b){this.jsxresize=b;this.mu();};c.getTriggers=function(){return this.jsxtriggers;};c.setTriggers=function(b){this.jsxtriggers=b;};c.getPath=function(){return this.jsxpath==null?"jsxid":this.jsxpath;};c.setPath=function(d,f){this.jsxpath=d;this.pH();if(!f&&this.getParent())this.getParent().repaint();};c.getSortPath=function(){return this.jsxsortpath!=null?this.jsxsortpath:this.getPath();};c.setSortPath=function(i){this.jsxsortpath=i;};c.getDataType=function(){return this.jsxdatatype==null?"text":this.jsxdatatype;};c.setDataType=function(l){this.jsxdatatype=l;};c.getSortDataType=function(){return this.jsxsortdatatype==null?this.getDataType():this.jsxsortdatatype;};c.setSortDataType=function(p){this.jsxsortdatatype=p;};c.getCanSort=function(){return this.jsxsort;};c.setCanSort=function(q){this.jsxsort=q;this.mu();};c.setFormatHandler=function(b){if(typeof b=="function"){this._jsxgy=new
jsx3.gui.Matrix.ColumnFormat();this._jsxgy.format=b;}else if(b&&typeof b=="object"&&typeof b.format=="function"){this._jsxgy=b;}else{delete this._jsxgy;this.jsxformathandler=b!=null?b+"":null;}};c.getFormatHandler=function(){return this.jsxformathandler;};c.vk=function(){if(typeof this._jsxgy=="undefined")if(this.jsxformathandler){this._jsxgy=jsx3.gui.Matrix.ColumnFormat.getInstance(this.jsxformathandler,this);if(this._jsxgy==null)try{var
ac=this.eval("var fn = "+this.jsxformathandler+"; fn;");if(typeof ac=="object"&&typeof ac.format=="function"&&typeof ac.validate=="function"){this._jsxgy=ac;}else if(typeof ac=="function"){this._jsxgy=new
jsx3.gui.Matrix.ColumnFormat();this._jsxgy.format=ac;}else Ac.error("There is a signature/type error when evaluating the format handler: "+this.jsxformathandler);}catch(Kc){Ac.error("Error evaluating the format handler string: "+this.jsxformathandler,jsx3.NativeError.wrap(Kc));}}else this._jsxgy=null;return this._jsxgy;};c.Vd=function(h,e,j){var
Cb=this.vi(true,h);var
Dc=Cb.recalculate(h,null,j);var
eb=this.getParent();var
cb=Cb.tp(0);cb.recalculate({height:Cb.Zh()},null,j);var
H=Cb.tp(1);var
yb={parentwidth:h.parentwidth};if(this.BZ()){var
bc=eb.getRowHeight(jsx3.gui.Matrix.DEFAULT_ROW_HEIGHT);yb.height=bc?bc:jsx3.gui.Matrix.DEFAULT_ROW_HEIGHT;}H.recalculate(yb,null,j);if(this.BZ()){var
Eb=H.tp(0);Eb.recalculate({height:H.Zh()},null,j);}if(Dc.w)eb.resetXslCacheData();return Dc;};c.zj=function(g){this.applyDynamicProperties();var
zb=this.getParent();if(zb&&(g==null||isNaN(g.parentwidth)||isNaN(g.parentheight))){g=zb.Ln(this);}else if(g==null)g={};g.width="100%";g.height="100%";g.boxtype="inline";g.tagname="td";var
vc,fc;if((vc=this.getBorder())!=null&&vc!="")g.border=vc;if((fc=this.getPadding())!=null&&fc!="")g.padding=fc;var
O=new
jsx3.gui.Painted.Box(g);var
ic={};ic.height=O.Zh();ic.boxtype="inline";ic.tagname="div";var
Bb=new
jsx3.gui.Painted.Box(ic);O.Od(Bb);var
G={};if(this.BZ()){var
Jc=zb.getRowHeight(jsx3.gui.Matrix.DEFAULT_ROW_HEIGHT);G.height=Jc?Jc:jsx3.gui.Matrix.DEFAULT_ROW_HEIGHT;}G.width="100%";G.boxtype="inline";G.tagname="td";G.parentwidth=g.parentwidth;if((vc=this.getCellBorder())!=null&&vc!="")G.border=vc;if((fc=this.getCellPadding())!=null&&fc!="")G.padding=fc;var
qb=new
jsx3.gui.Painted.Box(G);O.Od(qb);var
P={};if(this.BZ())P.height=qb.Zh();P.boxtype="inline";P.tagname="div";var
Ob=new
jsx3.gui.Painted.Box(P);qb.Od(Ob);return O;};c.BZ=function(){var
ac=this.getParent();if(ac){if(ac.getPagingModel()==3)return true;return ac.getRowHeight()!=0;}return true;};c.paint=function(){this.applyDynamicProperties();var
N=this.getParent();var
Ab=this.vi(true);Ab.setAttributes('id="'+this.getId()+'" unselectable="on" '+this.fo()+N.cn("mousedown","Ph")+N.cn("click","Bg"));Ab.setStyles(this.Nh()+this.Dg()+this.mg()+this.Eo()+this.Wm()+this.Ho()+this.paintVAlign());var
cc=Ab.tp(0);cc.setAttributes('class="jsx30matrixcolumn_value" unselectable="on"');cc.setStyles(this.paintWrap()+this.Ak()+this.xp()+this.kA());return Ab.paint().join(cc.paint().join(this.im()));};c.repaint=function(){this.mu();};c.kA=function(){if(this.getSortPath()==this.getParent().getSortPath())return "background-image:url("+(this.getParent().getSortDirection()=="ascending"?jsx3.gui.Matrix.SORT_ASCENDING_IMG:jsx3.gui.Matrix.SORT_DESCENDING_IMG)+");";return "";};c._applySortIcon=function(j){this.getRendered().childNodes[0].style.backgroundImage=j?"url("+(this.getParent().getSortDirection()=="ascending"?jsx3.gui.Matrix.SORT_ASCENDING_IMG:jsx3.gui.Matrix.SORT_DESCENDING_IMG)+")":"";};c.LW=function(){return '<colgroup style="'+this.hd()+'"></colgroup>';};c.setWidth=function(i,g){this.jsxwidth=i;var
O=this.getParent();if(O)O.Ch(O.getParent().Ln(O),g);};c.setDisplay=function(h,s){this.jsxdisplay=h;var
Gb=this.getParent();if(Gb){Gb.nk();if(s)Gb.repaint();}return this;};c.getDisplayIndex=function(){var
z=this.getParent();if(z){var
Tb=z.Xj();for(var
Qb=0;Qb<Tb.length;Qb++)if(Tb[Qb]==this)return Qb;}};c.hd=function(){return this.getCellBackgroundColor()?"background-color:"+this.getCellBackgroundColor()+";":"{$jsx_rowbg}";};c.ce=function(){return this.getCellBorder()?this.getCellBorder()+";":"";};c.He=function(){return this.getCellColor()?"color:"+this.getCellColor()+";":";";};c.jj=function(){return this.getCellCursor()?"cursor:"+this.getCellCursor()+";":"";};c.Of=function(){if(!this.getCellFontName())return "";return "font-family:"+(this.getCellFontName()?this.getCellFontName():jsx3.gui.Block.DEFAULTFONTNAME)+";";};c.Lk=function(){if(!this.getCellFontSize())return "";return "font-size:"+(this.getCellFontSize()?this.getCellFontSize():jsx3.gui.Block.DEFAULTFONTSIZE)+"px;";};c.rl=function(){return this.getCellFontWeight()?"font-weight:"+this.getCellFontWeight()+";":"";};c.paintWrap=function(){return this.getWrap(0)==0?"white-space:nowrap;overflow:hidden;":"";};c.Vn=function(){return this.getCellWrap(0)==0?"white-space:nowrap;overflow:hidden;":"";};c.Qe=function(){return "text-align:"+(this.getCellTextAlign()?this.getCellTextAlign():"left")+";";};c.paintVAlign=function(){return "vertical-align:"+(this.getVAlign()?this.getVAlign():"top")+";";};c.Nk=function(){return "vertical-align:"+(this.getCellVAlign()?this.getCellVAlign():"top")+";";};c.getCellBackgroundColor=function(){return this.jsxcellbgcolor;};c.setCellBackgroundColor=function(n){this.jsxcellbgcolor=n;this.pH();};c.getCellBorder=function(){return this.jsxcellborder;};c.setCellBorder=function(s,r){this.jsxcellborder=s;this.pH();if(!r&&this.getParent())this.getParent().repaint();};c.getCellColor=function(){return this.jsxcellcolor;};c.setCellColor=function(e){this.jsxcellcolor=e;this.pH();};c.getCellCursor=function(){return this.jsxcellcursor;};c.setCellCursor=function(s){this.jsxcellcursor=s;this.pH();};c.getCellFontName=function(){return this.jsxcellfontname;};c.setCellFontName=function(l){this.jsxcellfontname=l;this.pH();};c.getCellFontSize=function(){return this.jsxcellfontsize;};c.setCellFontSize=function(n){this.jsxcellfontsize=n;this.pH();};c.getCellFontWeight=function(){return this.jsxcellfontweight;};c.setCellFontWeight=function(g){this.jsxcellfontweight=g;this.pH();};c.getCellPadding=function(){return this.jsxcellpadding;};c.setCellPadding=function(b,p){this.jsxcellpadding=b;this.pH();if(!p&&this.getParent())this.getParent().repaint();};c.getCellTextAlign=function(){return this.jsxcelltextalign;};c.setCellTextAlign=function(p){this.jsxcelltextalign=p;this.pH();};c.getCellVAlign=function(){return this.jsxcellvalign;};c.setCellVAlign=function(e){this.jsxcellvalign=e;this.pH();};c.getCellWrap=function(q){return this.jsxcellwrap!=null?this.jsxcellwrap:q!=null?q:null;};c.setCellWrap=function(e){this.jsxcellwrap=e;this.pH();};c.setBorder=function(r){this.jsxborder=r;this.qo();this.mu();};c.setPadding=function(f){this.jsxpadding=f;this.qo();this.mu();};c.getWrap=function(r){return this.jsxwrap!=null?this.jsxwrap:r!=null?r:null;};c.setWrap=function(l){this.jsxwrap=l;this.mu();};c.getVAlign=function(){return this.jsxvalign;};c.setVAlign=function(h){this.jsxvalign=h;this.mu();};c.setText=function(e,h){this.jsxtext=e;var
Ic;if(h&&(Ic=this.getRendered())!=null)Ic.childNodes[0].innerHTML=e;return this;};c.paintChild=function(h){};c.getEditMask=function(){return this.getChild(0);};c.getEditMasks=function(){return this.getChildren();};c.getValueForRecord=function(p){var
Gb=this.getParent().getRecordNode(p);if(Gb)return Gb.getAttribute(this.getPath());else if(p=="jsxautorow")return this.getParent().getAutoRowSession()[this.getPath()];};c.setValueForRecord=function(i,a){var
Xb=this.getParent().getRecordNode(i);if(Xb)Xb.setAttribute(this.getPath(),a);else if(i=="jsxautorow")this.getParent().getAutoRowSession()[this.getPath()]=a;};c.onSetParent=function(a){return jsx3.gui.Matrix&&a instanceof jsx3.gui.Matrix;};c.pH=function(){var
Nb=this.getParent();if(Nb)Nb.nk();};c.mu=function(){var
Cc=this.getParent();if(Cc)Cc.repaintHead();};});jsx3.gui.MatrixColumn=jsx3.gui.Matrix.Column;
