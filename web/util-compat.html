<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
  <title>DWR - Util.js - Browser Compatiblity</title>
  <script type='text/javascript' src='/dwr/dwr/util.js'></script>
</head>

<body>

<h1>util.js: Browser Compatiblity</h1>

<p>
Generally speaking DWR is not a generic Javascript library so it does not
attempt to provide fill this need. However there are a few common issues that
we can help to answer.
</p>

<p>
The functions described on this page may well be deprecated soon, so please
shout on the <a href="https://dwr.dev.java.net/servlets/ProjectMailingListList">mailing lists</a>
if you wish any of them to stay.
</p>

<h3>Action on [RETURN] in an input field</h3>
<p>
When inputs are part of a form then the return key causes the for to be
submitted. When you are using Ajax, this is generally not what you want. Usually
it would be far better if some Javascript was triggered.
</p>

<p>
Unfortunately different browsers handle events in quite a different manner. So
<code>DWRUtil.onReturn</code> patches over the differences. If you want to
have a submit button that does the same as pressing return in a form field,
then you need to code your application like this:
</p>

<pre>
&lt;input type="text" onkeypressed="DWRUtil.onReturn(event, submitFunction)"/&gt;
&lt;input type="button" onclick="submitFunction()"/&gt;
</pre>

<script>
function submitFunction()
{
    $("alert").style.display = "inline";
    setTimeout("unsubmitFunction();", 1000);
}
function unsubmitFunction()
{
    $("alert").style.display = "none";
}
</script>

<p>
<input type="text" onkeydown="DWRUtil.onReturn(event, submitFunction)"/>
<input type="button" onclick="submitFunction()" value="GO"/>
<span id="alert" style="display:none; background:#FFFFDD; font-weight:bold;">submitFunction called</span>
</p>

<h3>Selecting a range of text in an input box</h3>
<p>
You need to select text in an input box for any "Google suggest" type functions,
however the selection model changes a lot between different browsers. The
DWRUtil function to help here is:
<code>DWRUtil.selectRange = function(ele, start, end)</code>.
</p>

<p>
For example:
</p>

<script>
function doSelectRange()
{
     DWRUtil.selectRange("sel-test", $("start").value, $("end").value);
}
</script>
<p>
<code>DWRUtil.selectRange("sel-test",
  <input id="start" type="text" value="4"/>,
  <input id="end" type="text" value="8"/>
)</code>
<input type="button" onclick="doSelectRange()" value="selectRange"/>
</p>

<p>
An input with <code>id="sel-test"</code>: <input id="sel-test" type="text" value="01234567890123456789"/>
</p>

</body>
</html>
