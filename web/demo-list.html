<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
  <title>DWR - Dynamically Populating a Selection List</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
  <link rel="stylesheet" type="text/css" href="generic.css"/>
  <script type='text/javascript' src='/dwr/dwr/interface/Demo.js'></script>
  <script type='text/javascript' src='/dwr/dwr/engine.js'></script>
  <script type='text/javascript' src='/dwr/dwr/util.js'></script>
  <script>
  function update()
  {
      var bigselect = document.getElementById("bigselect");
      Demo.getNumbers(createList, bigselect.checked);
  }

  function createList(data)
  {
      DWRUtil.fillList("numlist", data);
  }
  </script>
</head>

<body onload="update()">
<div id="page-logo">getahead - dwr</div><div id="page-title">[ <a href="/">getahead</a> ]</div>
<div id="page-portlet-1" class="sidebody">
  <h2><a href="http://www.getahead.ltd.uk"/>Getahead Ltd</a></h2>
  <p>
    <h2>DWR</h2>
    <a href="index.html" target="_top">Home</a><br/>
    <a href="https://dwr.dev.java.net" target="_top">Java.net</a><br/>
    <a href="https://dwr.dev.java.net/servlets/ProjectDocumentList?folderID=2920&expandFolder=2920&folderID=0" target="_top">Download</a>
    <a href="https://dwr.dev.java.net/servlets/ProjectMailingListList" target="_top">Mailing Lists</a><br/>
  </p>
  <p>
    <h3>Documentation</h3>
    <a href="intro.html" target="_top">Introduction</a><br/>
    <a href="config-howto.html" target="_top">Configuration</a><br/>
    <a href="config-js.html" target="_top">Script Docs</a><br/>
    <a href="config-ref.html" target="_top">dwr.xml</a><br/>
    <a href="javadoc-ExecutionContext.html" target="_top">JavaDoc</a><br/>
    <a href="issues.html" target="_top">Issues</a><br/>
    <a href="upgrading.html" target="_top">Upgrading</a>
  </p>
  <p>
    <h3>Examples</h3>
    <a href="demo-text.html" target="_top">Dynamic Text</a><br/>
    <a href="demo-list.html" target="_top">Selection Lists</a><br/>
    <a href="demo-form.html" target="_top">Live Forms</a><br/>
    <a href="demo-table.html" target="_top">Live Tables</a><br/>
    <a href="demo-postcode.html" target="_top">Address Entry</a>
  </p>
  <p>
    <h3>Testing</h3>
    <a href="test.html" target="_top">Unit Tests</a><br/>
    <a href="dwr" target="_top">Manual Tests</a>
  </p>
</div>

<div id="page-content">

<h1>Dynamically Populating a Selection List</h1>

<h2>Demo</h2>
<p>
  Big Numbers: <input type="checkbox" id="bigselect" onclick="update();"/>
  <br/>
  Pick a Number:
  <select id="numlist" style="vertical-align:top;">
  </select>
</p>

<h2>How it works</h2>

<p>
  When the page loads and when you click on the "Big Numbers" check box the
  <code>update()</code> function gets called.<br/>
  It looks like this:
</p>

<pre>
function update()
{
    var bigselect = document.getElementById("bigselect");
    Demo.getNumbers(createList, bigselect.checked);
}
</pre>

<p>
  <code>bigselect</code> is the id of the checkbox input element.
  <code>Demo.getNumbers()</code> is a Java function defined within
  <code>uk.ltd.getahead.dwr.test.Demo</code>. It looks like this:
</p>

<pre>
public int[] getNumbers(boolean big)
{
    if (big)
    {
        return new int[] { 1000, 2000, 3000, 4000 };
    }
    else
    {
        return new int[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
    }
}
</pre>

<p>
  When this method returns, we asked DWR to call <code>createList()</code> when
  we got data from the getNumbers call. The <code>createList()</code> JavaScript
  function looks like this:
</p>

<pre>
function createList(data)
{
    DWRUtil.fillList("numlist", data);
}
</pre>

<p>
  The DWRUtil.fillList function comes from <code>util.js</code>. It takes data
  returned from <code>getNumbers()</code> as the <code>data</code> parameter and
  loops over the elements of the array creating new options for the select as it
  goes.
</p>

</div>
</body>
</html>
