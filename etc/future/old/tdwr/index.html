<html>
<head>
    <link rel="stylesheet" type="text/css" media="all" href="css/displaytag.css" />

    <script type='text/javascript' src='/tdwr/dwr/interface/Usermanager.js'></script>
    <script type='text/javascript' src='/tdwr/dwr/engine.js'></script>
    <script type='text/javascript' src='/tdwr/dwr/util.js'></script>
    <script type='text/javascript' src='/tdwr/js/tabloid.js'></script>
    <script>

    var getId = function(user) { return user.id };
    var getFirstName = function(user) { return user.firstName };
    var getLastName = function(user) { return user.lastName };
    var getEmail = function(user) { return "<a href=\"mailto:"+user.email+"\">"+user.email+"</a>" };

    function fillTabloid(listvalue)
    {
        Tabloid.drawInfo(listvalue,"pagebanner");

        Tabloid.drawPages(listvalue,"pagelinks","tabloid");

        Tabloid.drawHeader(listvalue,"_id","tabloid","id","ID number");
        Tabloid.drawHeader(listvalue,"_firstname","tabloid","firstName","Firstname");
        Tabloid.drawHeader(listvalue,"_lastname","tabloid","lastName","Lastname");
        //Tabloid.drawHeader(listvalue,"_email","tabloid","email","E-mail");

        DWRUtil.removeAllRows("tdata");
        if (listvalue.values.length > 0)
        {
            Tabloid.drawTable("tdata", listvalue.values, [getId, getFirstName, getLastName, getEmail], true);
        }
        else
        {
            $("tdata").innerHTML = "<tr><td colspan='4'>NO DATA</td></tr>";
        }
    }

    function tabloid(page, max, order, asc, filter)
    {
        Usermanager.getUsers(fillTabloid, page, max, order, asc, filter);
    }

    function onFilterChange()
    {
        _filter = $("tfilter").value;
        update();
    }

    function onMaxChange()
    {
        _max = $("tmax").value;
        update();
    }

    var _page = 1;
    var _max = 10;
    var _order = "id";
    var _asc = true;
    var _filter = "";

    function update()
    {
        tabloid(_page, _max, _order, _asc, _filter);
    }

    window.onload = function()
    {
        DWRUtil.useLoadingMessage();
        update();
    }

    </script>
</head>
<body>

<span id="pagebanner" class="pagebanner"></span>
<span id="pagelinks" class="pagelinks"></span>

<table class="list">
  <thead>
    <tr>
      <th id="_id" >ID</th>
      <th id="_firstname" >firstName</th>
      <th id="_lastname">lastName</th>
      <th id="_email">E-mail</th>
    </tr>
  </thead>
  <tbody id="tdata">
  </tbody>
</table>

<span id="footer" class="footer">
some filter option:
<select id="tfilter" name="filterName" onChange="onFilterChange()">
    <option value="" selected="selected">No filter</option>
    <option value="@id&lt;50">id &lt; 50</option>
    <option value="@id&gt;50">id &gt; 50</option>    
    <option value="starts-with(@firstName,'N')">firstname start with N</option>    
    <option value="starts-with(@lastName,'D')">lastname start with D</option>    
    <option value="@lastName='Narcatus'">lastName is Narcatus</option>    
</select>
max number of row: 
<select id="tmax" name="maxName" onChange="onMaxChange()">
    <option value="10" selected="selected">10</option>
    <option value="20">20</option>
    <option value="30">30</option>        
</select>
</span>

</body>
</html>
