<?xml version="1.0"?>
<project name="dwr" default="all">

  <!--=======================================================================-->
  <property name="source.root" value="."/>
  <property name="source.java" value="${source.root}/java"/>
  <property name="source.jar" value="${source.root}/jar"/>
  <property name="source.etc" value="${source.root}/etc"/>
  <property name="source.web" value="${source.root}/web"/>
  <patternset id="java.non.compile">
    <include name="**/*.properties"/>
    <include name="**/*.gif"/>
    <include name="**/*.jpg"/>
    <include name="**/*.png"/>
    <include name="**/*.ser"/>
  </patternset>

  <!--=======================================================================-->
  <target name="war" description="Create a WAR directory">
    <echo message="Building on ${os.name}"/>
    <tstamp/>
    <mkdir dir="${source.web}/WEB-INF/classes"/>
    <javac debug="on" includes="**/*.java" destdir="${source.web}/WEB-INF/classes" source="1.5">
      <src path="${source.java}"/>
      <classpath>
        <fileset dir="${source.web}/WEB-INF/lib" includes="**/*.jar"/>
        <fileset dir="${source.jar}" includes="**/*.jar"/>
      </classpath>
    </javac>
    <copy todir="${source.web}/WEB-INF/classes">
      <fileset dir="${source.java}">
        <patternset refid="java.non.compile"/>
      </fileset>
      <fileset dir="${source.etc}/classpath"/>
    </copy>
  </target>

  <!--=======================================================================-->
  <target name="all" depends="war">
  </target>

  <!--=======================================================================-->
  <target name="clean">
    <delete dir="${source.web}/WEB-INF/classes"/>
  </target>

  <!--=======================================================================-->
  <target name="cvsup" description="cvs update">
    <cvs dest=".">
      <commandline>
        <argument value="-q"/>
        <argument value="update"/>
        <argument value="-d"/>
        <argument value="-P"/>
      </commandline>
    </cvs>
  </target>

</project>
